<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>

    <style>
        body {
            margin: 0
        }
    </style>
</head>

<body>
    <div id="chart"></div>

    <script>

        

        const load = (data) => {
            const chartDom = document.getElementById('chart');
        const myChart = echarts.init(chartDom);
            const option = {
                title: {
                    text: 'WORLD COFFEE RESEARCH SENSORY LEXICON',
                    subtext: 'Source: https://worldcoffeeresearch.org/work/sensory-lexicon/',
                    textStyle: {
                        fontSize: 14,
                        align: 'center'
                    },
                    subtextStyle: {
                        align: 'center'
                    },
                    sublink: 'https://worldcoffeeresearch.org/work/sensory-lexicon/'
                },
                series: {
                    type: 'sunburst',
                    data: data,
                    radius: [0, '95%'],
                    sort: undefined,
                    emphasis: {
                        focus: 'ancestor'
                    },
                    levels: [
                        {},
                        {
                            r0: '15%',
                            r: '35%',
                            itemStyle: {
                                borderWidth: 2
                            },
                            label: {
                                rotate: 'tangential'
                            }
                        },
                        {
                            r0: '35%',
                            r: '70%',
                            label: {
                                align: 'right'
                            }
                        },
                        {
                            r0: '70%',
                            r: '72%',
                            label: {
                                position: 'outside',
                                padding: 3,
                                silent: false
                            },
                            itemStyle: {
                                borderWidth: 3
                            }
                        }
                    ]
                }
            };

            myChart.setOption(option);
        };

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const data = urlParams.get('data');

        if (data) {
            load(JSON.parse(data));
        } else {
            fetch('example-echarts.json').then(res => res.json()).then(load);
        }

    </script>
</body>

</html>